<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# " lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Visualising data on the web with Python and Dash | Data visualisation hub</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/ipython.min.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/nikola_ipython.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" href="../../rss.xml">
<link rel="canonical" href="http://dataviz.shef.ac.uk/tutorials/dash/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="University of Sheffield">
<meta property="og:site_name" content="Data visualisation hub">
<meta property="og:title" content="Visualising data on the web with Python and Dash">
<meta property="og:url" content="http://dataviz.shef.ac.uk/tutorials/dash/">
<meta property="og:description" content="Dash is a user interface library for creating analytical web applications. Those who use Python for data analysis, data exploration, visualization, modelling, instrument control, and reporting will fi">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2018-01-18T08:56:45Z">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="http://dataviz.shef.ac.uk/">

                <span id="blog-title">Data visualisation hub</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../../resources/">Resources</a>
            </li>
<li class="dropdown">
<a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Tutorials <b class="caret"></b></a>
            <ul class="dropdown-menu">
<li class="active">
<a href=".">Dash <span class="sr-only">(active)</span></a>
                    </li>
<li>
<a href="../../orda/link/">ORDA showcase</a>
                    </li>
<li>
<a href="../../orda/cite/">Citing data</a>
            </li>
</ul>
</li>
</ul>
<ul class="nav navbar-nav navbar-right">
<li>
    <a href="index.md" id="sourcelink">Source</a>
    </li>

                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text storypage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">Visualising data on the web with Python and Dash</a></h1>

        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <div>
<p><a href="https://plot.ly/dash/">Dash</a> is a user interface library for creating analytical web applications. Those who use <a href="https://python.org">Python</a> for data analysis, data exploration, visualization, modelling, instrument control, and reporting will find immediate use for Dash.</p>
<p><a href="https://plot.ly/dash/">Read the full documentation for Dash</a></p>
<hr>
<p><strong>Contents</strong></p>
<div class="toc">
<ul>
<li><a href="#1-installation">1. Installation</a></li>
<li><a href="#2-about-this-example">2. About this example</a></li>
<li><a href="#3-first-step">3. First step</a></li>
<li><a href="#4-download-and-read-a-csv-file">4. Download and read a CSV file</a></li>
<li><a href="#5-preview-dataset">5. Preview Dataset</a></li>
<li><a href="#6-layout">6. Layout</a></li>
<li><a href="#7-interactivity">7. Interactivity</a></li>
<li><a href="#8-style">8. Style</a></li>
<li><a href="#9-running-application">9. Running Application</a></li>
</ul>
</div>
<h3 id="1-installation">1. Installation</h3>
<p>In order to run Dash app in a Flask server install the following libraries.</p>
<p class="alert alert-block alert-warning">Make sure you have installed <strong>Python</strong> (https://www.python.org/downloads/) and <strong>pip</strong> (https://pip.pypa.io/en/stable/installing/)</p>
<pre class="code literal-block"><span></span>pip install <span class="nv">dash</span><span class="o">==</span><span class="m">0</span>.19.0  <span class="c1"># The core dash backend</span>
pip install dash-renderer<span class="o">==</span><span class="m">0</span>.11.1  <span class="c1"># The dash front-end</span>
pip install dash-html-components<span class="o">==</span><span class="m">0</span>.8.0  <span class="c1"># HTML components</span>
pip install dash-core-components<span class="o">==</span><span class="m">0</span>.15.2  <span class="c1"># Supercharged components</span>
pip install plotly --upgrade  <span class="c1"># Latest Plotly graphing library</span>
</pre>


<h3 id="2-about-this-example">2. About this example</h3>
<p>In this example we are going to build a graph that shows life expectancy in comparison to GDP per capita based in all countries around the World.</p>
<h3 id="3-first-step">3. First step</h3>
<p>Besides Dash, we are using <strong>Pandas</strong> for extract and manipulate data and <strong>Plotly</strong> to render the output into a Graph. In order to use those libraries you first need to import them:</p>
<pre class="code literal-block"><span></span><span class="kn">import</span> <span class="nn">dash</span>
<span class="kn">import</span> <span class="nn">dash_core_components</span> <span class="kn">as</span> <span class="nn">dcc</span>
<span class="kn">import</span> <span class="nn">dash_html_components</span> <span class="kn">as</span> <span class="nn">html</span>

<span class="kn">import</span> <span class="nn">plotly.graph_objs</span> <span class="kn">as</span> <span class="nn">go</span>

<span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
</pre>


<h3 id="4-download-and-read-a-csv-file">4. Download and read a CSV file</h3>
<p>Use Panda's <code>read_csv</code> function to download and extract your dataset. When you read a CSV, you get a <code>DataFrame</code>, which is made up of rows and columns. You access columns in a DataFrame the same way you access elements of a dictionary.</p>
<pre class="code literal-block"><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">'https://ndownloader.figsh.com/files/8261349'</span><span class="p">)</span>
</pre>


<h3 id="5-preview-dataset">5. Preview Dataset</h3>
<p>Function <code>head()</code> gives you a preview of the downloaded dataset.</p>
<pre class="code literal-block"><span></span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre>


<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead><tr style="text-align: right;">
<th></th>
      <th>Unnamed: 0</th>
      <th>country</th>
      <th>continent</th>
      <th>population</th>
      <th>life expectancy</th>
      <th>gdp per capita</th>
    </tr></thead>
<tbody>
<tr>
<th>0</th>
      <td>11</td>
      <td>Afghanistan</td>
      <td>Asia</td>
      <td>31889923.0</td>
      <td>43.828</td>
      <td>974.580338</td>
    </tr>
<tr>
<th>1</th>
      <td>23</td>
      <td>Albania</td>
      <td>Europe</td>
      <td>3600523.0</td>
      <td>76.423</td>
      <td>5937.029526</td>
    </tr>
<tr>
<th>2</th>
      <td>35</td>
      <td>Algeria</td>
      <td>Africa</td>
      <td>33333216.0</td>
      <td>72.301</td>
      <td>6223.367465</td>
    </tr>
<tr>
<th>3</th>
      <td>47</td>
      <td>Angola</td>
      <td>Africa</td>
      <td>12420476.0</td>
      <td>42.731</td>
      <td>4797.231267</td>
    </tr>
<tr>
<th>4</th>
      <td>59</td>
      <td>Argentina</td>
      <td>Americas</td>
      <td>40301927.0</td>
      <td>75.320</td>
      <td>12779.379640</td>
    </tr>
</tbody>
</table>
</div>

<h3 id="6-layout">6. Layout</h3>
<p>Dash apps are composed of two parts: <strong>Layout</strong> and <strong>Interactivity</strong>.
The first part is the "layout" of the app and it describes what the application looks like.</p>
<p>In this example we are going to create two kinds of filter:</p>
<ol>
<li>Countries: Multiple selection combo box with a list of all countries included on the Dataset</li>
<li>Life Expectancy: Slider with a range of ages (min and max)</li>
</ol>
<!-- ![filter.PNG](attachment:filter.PNG) --><pre class="code literal-block"><span></span><span class="n">countries</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">'country'</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">dash</span><span class="o">.</span><span class="n">Dash</span><span class="p">()</span>

<span class="n">app</span><span class="o">.</span><span class="n">layout</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">([</span>

    <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">([</span>
        <span class="n">html</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="s1">'Country'</span><span class="p">),</span>
        <span class="n">dcc</span><span class="o">.</span><span class="n">Dropdown</span><span class="p">(</span>
            <span class="nb">id</span><span class="o">=</span><span class="s1">'country'</span><span class="p">,</span>
            <span class="n">options</span><span class="o">=</span><span class="p">[{</span><span class="s1">'label'</span><span class="p">:</span> <span class="n">i</span><span class="p">,</span> <span class="s1">'value'</span><span class="p">:</span> <span class="n">i</span><span class="p">}</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">countries</span><span class="p">],</span>
            <span class="n">value</span><span class="o">=</span><span class="s1">''</span><span class="p">,</span>
            <span class="n">placeholder</span><span class="o">=</span><span class="s1">'Select...'</span><span class="p">,</span>
            <span class="n">multi</span><span class="o">=</span><span class="bp">True</span>
        <span class="p">)</span>
    <span class="p">],</span>    
    <span class="n">style</span><span class="o">=</span><span class="p">{</span><span class="s1">'width'</span><span class="p">:</span> <span class="s1">'20%'</span><span class="p">,</span> <span class="s1">'display'</span><span class="p">:</span> <span class="s1">'inline-block'</span><span class="p">,</span> <span class="s1">'margin-bottom'</span><span class="p">:</span> <span class="s1">'20px'</span><span class="p">}),</span>    

    <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">([</span>
        <span class="n">html</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="s1">'Life Expectancy'</span><span class="p">),</span>
        <span class="n">dcc</span><span class="o">.</span><span class="n">Slider</span><span class="p">(</span>
            <span class="nb">id</span><span class="o">=</span><span class="s1">'expectancy-slider'</span><span class="p">,</span>
            <span class="nb">min</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span>
            <span class="nb">max</span><span class="o">=</span><span class="mi">80</span><span class="p">,</span>
            <span class="n">value</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span>
            <span class="n">step</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
            <span class="n">marks</span><span class="o">=</span><span class="p">{</span><span class="s1">'30'</span><span class="p">:</span><span class="s1">'&gt;30'</span><span class="p">,</span> <span class="s1">'40'</span><span class="p">:</span><span class="s1">'&gt;40'</span><span class="p">,</span> <span class="s1">'50'</span><span class="p">:</span><span class="s1">'&gt;50'</span><span class="p">,</span> <span class="s1">'60'</span><span class="p">:</span><span class="s1">'&gt;60'</span><span class="p">,</span> <span class="s1">'70'</span><span class="p">:</span><span class="s1">'&gt;70'</span><span class="p">,</span> <span class="s1">'80'</span><span class="p">:</span><span class="s1">'&gt;80'</span><span class="p">}</span>
        <span class="p">),</span>
    <span class="p">],</span>
    <span class="n">style</span><span class="o">=</span><span class="p">{</span><span class="s1">'width'</span><span class="p">:</span> <span class="s1">'20%'</span><span class="p">,</span> <span class="s1">'display'</span><span class="p">:</span> <span class="s1">'inline-block'</span><span class="p">,</span> <span class="s1">'margin-bottom'</span><span class="p">:</span> <span class="s1">'20px'</span><span class="p">,</span> <span class="s1">'margin-left'</span><span class="p">:</span> <span class="s1">'20px'</span><span class="p">}),</span>

    <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">([</span>
        <span class="n">dcc</span><span class="o">.</span><span class="n">Graph</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s1">'life-exp-vs-gdp'</span><span class="p">),</span>
    <span class="p">],</span>
    <span class="n">style</span><span class="o">=</span><span class="p">{</span><span class="s1">'width'</span><span class="p">:</span> <span class="s1">'70%'</span><span class="p">}),</span>
<span class="p">])</span>
</pre>


<h3 id="7-interactivity">7. Interactivity</h3>
<p>Dash provides a simple reactive decorator for binding your custom data analysis code to your Dash user interface.<br>
When an input element changes (e.g. when you select an item in the dropdown or drag the slider), Dash’s decorator provides your Python code with the new value of the input.<br>
In this example we are calling the <code>update_graph</code> function each time either a country is selected or a life expectancy range is set.</p>
<pre class="code literal-block"><span></span><span class="nd">@app.callback</span><span class="p">(</span>
    <span class="n">dash</span><span class="o">.</span><span class="n">dependencies</span><span class="o">.</span><span class="n">Output</span><span class="p">(</span><span class="s1">'life-exp-vs-gdp'</span><span class="p">,</span> <span class="s1">'figure'</span><span class="p">),</span>
    <span class="p">[</span>
        <span class="n">dash</span><span class="o">.</span><span class="n">dependencies</span><span class="o">.</span><span class="n">Input</span><span class="p">(</span><span class="s1">'expectancy-slider'</span><span class="p">,</span> <span class="s1">'value'</span><span class="p">),</span>
        <span class="n">dash</span><span class="o">.</span><span class="n">dependencies</span><span class="o">.</span><span class="n">Input</span><span class="p">(</span><span class="s1">'country'</span><span class="p">,</span> <span class="s1">'value'</span><span class="p">)</span>
    <span class="p">])</span>
<span class="k">def</span> <span class="nf">update_graph</span><span class="p">(</span><span class="n">expectancy</span><span class="p">,</span> <span class="n">country</span><span class="p">):</span>

    <span class="n">filtered_df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s2">"life expectancy"</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">expectancy</span><span class="p">]</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">country</span> <span class="o">!=</span> <span class="s1">''</span> <span class="ow">and</span> <span class="n">country</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">):</span>
        <span class="n">filtered_df</span> <span class="o">=</span> <span class="n">filtered_df</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">country</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">'|'</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">country</span><span class="p">))]</span>

    <span class="n">traces</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">filtered_df</span><span class="o">.</span><span class="n">continent</span><span class="o">.</span><span class="n">unique</span><span class="p">():</span>
        <span class="n">df_by_continent</span> <span class="o">=</span> <span class="n">filtered_df</span><span class="p">[</span><span class="n">filtered_df</span><span class="p">[</span><span class="s1">'continent'</span><span class="p">]</span> <span class="o">==</span> <span class="n">i</span><span class="p">]</span>
        <span class="n">traces</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">go</span><span class="o">.</span><span class="n">Scatter</span><span class="p">(</span>
            <span class="n">x</span><span class="o">=</span><span class="n">df_by_continent</span><span class="p">[</span><span class="s1">'gdp per capita'</span><span class="p">],</span>
            <span class="n">y</span><span class="o">=</span><span class="n">df_by_continent</span><span class="p">[</span><span class="s1">'life expectancy'</span><span class="p">],</span>
            <span class="n">text</span><span class="o">=</span><span class="n">df_by_continent</span><span class="p">[</span><span class="s1">'country'</span><span class="p">],</span>
            <span class="n">mode</span><span class="o">=</span><span class="s1">'markers'</span><span class="p">,</span>
            <span class="n">opacity</span><span class="o">=</span><span class="mf">0.7</span><span class="p">,</span>
            <span class="n">marker</span><span class="o">=</span><span class="p">{</span>
                <span class="s1">'size'</span><span class="p">:</span> <span class="mi">15</span><span class="p">,</span>
                <span class="s1">'line'</span><span class="p">:</span> <span class="p">{</span><span class="s1">'width'</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">,</span> <span class="s1">'color'</span><span class="p">:</span> <span class="s1">'white'</span><span class="p">}</span>
            <span class="p">},</span>
            <span class="n">name</span><span class="o">=</span><span class="n">i</span>
        <span class="p">))</span>

    <span class="k">return</span> <span class="p">{</span>
        <span class="s1">'data'</span><span class="p">:</span> <span class="n">traces</span><span class="p">,</span>
        <span class="s1">'layout'</span><span class="p">:</span> <span class="n">go</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span>
            <span class="n">xaxis</span><span class="o">=</span><span class="p">{</span><span class="s1">'title'</span><span class="p">:</span> <span class="s1">'GDP Per Capita'</span><span class="p">,</span> <span class="s1">'titlefont'</span><span class="p">:</span> <span class="nb">dict</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mi">18</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">'darkgrey'</span><span class="p">),</span> <span class="s1">'zeroline'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span> <span class="s1">'ticks'</span><span class="p">:</span> <span class="s1">'outside'</span> <span class="p">},</span>
            <span class="n">yaxis</span><span class="o">=</span><span class="p">{</span><span class="s1">'title'</span><span class="p">:</span> <span class="s1">'Life Expectancy'</span><span class="p">,</span> <span class="s1">'titlefont'</span><span class="p">:</span> <span class="nb">dict</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mi">18</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">'darkgrey'</span><span class="p">),</span> <span class="s1">'range'</span><span class="p">:</span> <span class="p">[</span><span class="mi">30</span><span class="p">,</span> <span class="mi">90</span><span class="p">],</span> <span class="s1">'ticks'</span><span class="p">:</span> <span class="s1">'outside'</span><span class="p">},</span>
            <span class="n">margin</span><span class="o">=</span><span class="p">{</span><span class="s1">'l'</span><span class="p">:</span> <span class="mi">60</span><span class="p">,</span> <span class="s1">'b'</span><span class="p">:</span> <span class="mi">60</span><span class="p">,</span> <span class="s1">'t'</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span> <span class="s1">'r'</span><span class="p">:</span> <span class="mi">20</span><span class="p">},</span>
            <span class="n">legend</span><span class="o">=</span><span class="p">{</span><span class="s1">'x'</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">'y'</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span>
            <span class="n">hovermode</span><span class="o">=</span><span class="s1">'closest'</span>
        <span class="p">)</span>
    <span class="p">}</span>
</pre>


<h3 id="8-style">8. Style</h3>
<p>Every aesthetic element of the app is customisable: The sizing, the positioning, the colors, the fonts. Dash apps are built and published in the Web, so the full power of CSS is available. </p>
<p>Use <code>app.css.append_css</code> in order to set an external CSS file</p>
<pre class="code literal-block"><span></span><span class="n">app</span><span class="o">.</span><span class="n">css</span><span class="o">.</span><span class="n">append_css</span><span class="p">({</span>
    <span class="s2">"external_url"</span><span class="p">:</span> <span class="s2">"https://codepen.io/chriddyp/pen/bWLwgP.css"</span>
<span class="p">})</span>
</pre>


<h3 id="9-running-application">9. Running Application</h3>
<p>Dash apps are web applications. Dash uses Flask as the web framework. The underlying Flask app is available at app.server, and for the purpose of running the application you should call <code>run_server</code> function in your python code as you can see below.</p>
<pre class="code literal-block"><span></span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">'__main__'</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run_server</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre>


<p>If it all works correctly, your app should be running and accessible in your web browser; the default address is <a href="http://127.0.0.1:8050/">http://127.0.0.1:8050/</a>. It should look something like this:</p>
<iframe src="https://dash-tutorial.herokuapp.com/" style="height: 600px; width: 100%;" frameborder="0"></iframe>

<hr>
<p><strong>Related technologies:</strong></p>
<ul>
<li><a href="https://pandas.pydata.org/">Pandas</a></li>
<li><a href="https://plot.ly/">Plotly</a></li>
<li><a href="https://reactjs.org/">React.js</a></li>
<li><a href="http://flask.pocoo.org/">Flask</a></li>
</ul>
</div>
    </div>
    

</article>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2018         <a href="mailto:rdm@sheffield.ac.uk">University of Sheffield</a> - Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a>         
            
        </footer>
</div>
</div>


            <script src="../../assets/js/all-nocdn.js"></script><script>$('a.image-reference:not(.islink) img:not(.islink)').parent().colorbox({rel:"gal",maxWidth:"100%",maxHeight:"100%",scalePhotos:true});</script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates -->
</body>
</html>
